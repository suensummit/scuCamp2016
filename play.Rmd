---
title: "資料科學首部曲－數據甦醒"
subtitle: "東吳大學巨資學院 x 木刻思"
author: "Summit Suen"
date: "January 27, 2016"
output: 
  ioslides_presentation:
    widescreen: true
    incremental: true
    css: main.css
---

## 孫玉峰｜Summit Suen {.columns-2}

![](https://scontent-tpe1-1.xx.fbcdn.net/hphotos-xpt1/v/t1.0-9/12219353_10207791457767376_4032212882967287236_n.jpg?oh=38b051b95f4597cc7fa1847b80c5be1e&oe=56FCA390)

### 課程經理／講師＠木刻思

### Taiwan R User Group Co-Organizer

### 學術 => 業界

### 相信資料跟數學會改變世界

# 暖身完畢，來點真槍實彈

# 決勝 21 點－Blackjack

![](http://upload.shuxuejia.com/image/20151022/dbdf49f1eb6d4d1b846080d9913d2b3b.JPEG)

## 21 點玩法 {.columns-2}

<iframe width="560" height="315" src="https://www.youtube.com/embed/uhPVps4HtHw" frameborder="0" allowfullscreen></iframe>

- Deck：就是一副 52 張的牌，四個花色各 13 張。

- Jack、Queen 跟 King 這三張牌都算十點。

- Ace 可以算 1 點也可以當 11 點（當手牌其他點數和小於 11 點時轉換）。

- Bust：爆牌，當你的總點數超過 21 點就是爆牌。

- Blackjack：兩張牌組成 21 點，意即一張 Ace + 10 點牌，這組合在牌桌上是最大的。

## 21 點玩法

```{r}
deck = rep(c(1:10, 10, 10, 10), 4)
deck
shuffle_decks = function(n) sample(rep(deck, n))
myFun = function(x) x+1
myFun(2)
```

## 21 點玩法

手牌點數計算方式：

- 加總手上所有牌。

- `0`：爆牌是最輸的，歸零計算。

- `+10`：如果手上有 Ace 總和又小於 12 點，則 Ace 變成 11 點。

- `+0.5`：兩張牌組成 21 點，比其他 21 點的組合都來得大。

## 21 點玩法

```{r}
handValue = function(cards) {
  value = sum(cards)
  # Check for an Ace and change value if it doesn't bust
  if (any(cards == 1) && value <= 11) 
    value = value + 10
  # Check bust (set to 0); check black jack (set to 21.5)
  if(value > 21)  
    0 
  else if (value == 21 && length(cards) == 2)  
    21.5 # Blackjack
  else 
    value
}
```

## 21 點玩法

```{r}
winnings = function(dealer, players) {
  if (dealer > 21) {
    # Dealer has blackjack, ties players with blackjack
    -1 * (players <= 21)
  } else if (dealer == 0) {
    # Dealer busts - all non-busted players win
    1.5 * (players > 21) +
      1 * (players <= 21 & players > 0) +
      -1 * (players == 0) 
  } else {
    # Dealer 21 or below, all player values > dealer win
    1.5 * (players > 21) +  
      1 * (players <= 21 & players > dealer) +
      -1 * (players <= 21 & players < dealer) 
  }
}
```

## 21 點玩法

```{r}
winnings = function(dealer, players){
  (players > dealer & players > 21) * 1.5 + # blackjack
  (players > dealer & players <= 21) * 1 +  # win
  (players < dealer | players == 0) * -1    # lose
}
winnings(21, 12)
winnings(20, 21)
winnings(21, 21.5)
```

## 21 點玩法

- Shoe：牌盒，1 Shoe 就是一條牌。

- Hit：要牌。手勢動作是點桌子，莊家會發牌給你以增加你的手牌點數 ，你可以一直要牌直到爆牌（Bust）為止。

- Stand：停牌。就是不要牌了。手勢是橫向擺動或是直接搖手表示不要牌了。

- Surrender：投降（輸一半）。手勢是單一手指在桌上橫劃一次。

- Split：分牌，只要你拿到兩張一樣點數的牌，就可以分牌，將兩張一樣點數的牌分成兩手牌，10 點跟 J/Q/K 不一樣花色也都算10點牌也可以分。手勢是對著莊家作出 `V` 字手勢。

- Double：加倍，就是多放一倍的籌碼，但是只能再要一張牌。手勢通常對著莊家比 `1` 的手勢代表只要一張牌。

----

## 參考資料 {.smaller}

> - [Case Studies in Data Science with R](http://www.rdatasciencecases.org/)
> - [Blackjack](http://wizardofodds.com/play/blackjack/)